# Ø¯Ù„ÙŠÙ„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… DataPurity ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙˆØªØµÙ†ÙŠÙ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ù….

---

## ğŸ¯ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª

### 1. Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© (Free)
- **Ø§Ù„Ø³Ø¹Ø±**: 0 Ø±ÙŠØ§Ù„
- **Ø§Ù„Ø­Ø¯ÙˆØ¯**:
  - Ø¹Ù…Ù„ÙŠØ© ØªÙ†Ø¸ÙŠÙ ÙˆØ§Ø­Ø¯Ø© Ø´Ù‡Ø±ÙŠÙ‹Ø§
  - 100 Ø³Ø¬Ù„ Ù„ÙƒÙ„ Ù…Ù„Ù
  - 10 ÙƒØ±ÙˆØª OCR Ø´Ù‡Ø±ÙŠÙ‹Ø§
  - Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø­Ø¯
- **Ø³Ø¹Ø± Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©**: 0.50 Ø±ÙŠØ§Ù„/ÙƒØ±Øª

### 2. Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ (Starter)
- **Ø§Ù„Ø³Ø¹Ø±**: 79 Ø±ÙŠØ§Ù„/Ø´Ù‡Ø±
- **Ø§Ù„Ø­Ø¯ÙˆØ¯**:
  - 5 Ø¹Ù…Ù„ÙŠØ§Øª ØªÙ†Ø¸ÙŠÙ Ø´Ù‡Ø±ÙŠÙ‹Ø§
  - 500 Ø³Ø¬Ù„ Ù„ÙƒÙ„ Ù…Ù„Ù
  - 100 ÙƒØ±Øª OCR Ø´Ù‡Ø±ÙŠÙ‹Ø§
  - Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø­Ø¯
- **Ø³Ø¹Ø± Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©**: 0.40 Ø±ÙŠØ§Ù„/ÙƒØ±Øª
- **Ø§Ù„Ù…ÙŠØ²Ø§Øª**: ØªÙ‚Ø§Ø±ÙŠØ± Ù…ØªÙ‚Ø¯Ù…Ø©ØŒ ÙƒØ´Ù Ø§Ù„ØªÙƒØ±Ø§Ø±ØŒ Ø¯Ø¹Ù… Ø°Ùˆ Ø£ÙˆÙ„ÙˆÙŠØ©

### 3. Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ (Business)
- **Ø§Ù„Ø³Ø¹Ø±**: 199 Ø±ÙŠØ§Ù„/Ø´Ù‡Ø±
- **Ø§Ù„Ø­Ø¯ÙˆØ¯**:
  - 20 Ø¹Ù…Ù„ÙŠØ© ØªÙ†Ø¸ÙŠÙ Ø´Ù‡Ø±ÙŠÙ‹Ø§
  - 2000 Ø³Ø¬Ù„ Ù„ÙƒÙ„ Ù…Ù„Ù
  - 500 ÙƒØ±Øª OCR Ø´Ù‡Ø±ÙŠÙ‹Ø§
  - 5 Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- **Ø³Ø¹Ø± Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©**: 0.30 Ø±ÙŠØ§Ù„/ÙƒØ±Øª
- **Ø§Ù„Ù…ÙŠØ²Ø§Øª**: ÙƒÙ„ Ù…ÙŠØ²Ø§Øª Starter + ØªØµÙ†ÙŠÙ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ØŒ Ø¯Ø¹Ù… WhatsApp

---

## ğŸ”§ ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª

### 1. Ø¹Ø¨Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Admin Dashboard)

```
/app/admin
```

**Ø§Ù„ÙˆØµÙˆÙ„**: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ† ÙÙ‚Ø·

**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù**:
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ¨Ø§Ù‚Ø§ØªÙ‡Ù…
- ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø©
- ØªØºÙŠÙŠØ± Ø¨Ø§Ù‚Ø© Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù…
- Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©

### 2. Ø¹Ø¨Ø± API

#### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
```http
GET /api/v1/billing/subscription
Authorization: Bearer {token}
```

**Ø§Ù„Ø±Ø¯**:
```json
{
  "plan": "starter",
  "status": "active",
  "current_period_end": "2025-12-20T00:00:00",
  "usage": {
    "cleaning": {
      "used": 2,
      "limit": 5,
      "percentage": 40
    },
    "ocr": {
      "used": 45,
      "limit": 100,
      "base_limit": 100,
      "extra_purchased": 0,
      "percentage": 45
    }
  }
}
```

#### ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¨Ø§Ù‚Ø©
```http
POST /api/v1/billing/upgrade
Content-Type: application/json

{
  "plan": "business"
}
```

#### Ø´Ø±Ø§Ø¡ ÙƒØ±ÙˆØª Ø¥Ø¶Ø§ÙÙŠØ©
```http
POST /api/v1/billing/purchase-cards
Content-Type: application/json

{
  "cards_count": 50
}
```

**Ø§Ù„Ø±Ø¯**:
```json
{
  "success": true,
  "cards_purchased": 50,
  "cost": 15.00,
  "cost_with_vat": 17.25,
  "total_cards_available": 150
}
```

#### Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
```http
POST /api/v1/billing/cancel
```

---

## ğŸ“Š ØªØµÙ†ÙŠÙ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡

### Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

ÙŠØªÙ… ØªØµÙ†ÙŠÙ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰:

1. **Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù†Ø´Ø·ÙŠÙ†** (Active Users)
   - ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù†ØªØ¸Ø§Ù…
   - Ù„Ù… ÙŠØªØ¬Ø§ÙˆØ²ÙˆØ§ Ø­Ø¯ÙˆØ¯Ù‡Ù…

2. **Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø§Ù„ØªØ¬Ø§ÙˆØ²** (Near Limit)
   - Ø§Ø³ØªØ®Ø¯Ù…ÙˆØ§ Ø£ÙƒØ«Ø± Ù…Ù† 80% Ù…Ù† Ø§Ù„Ø­Ø¯
   - Ù…Ø±Ø´Ø­ÙˆÙ† Ù„Ù„ØªØ±Ù‚ÙŠØ©

3. **Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…ØªØ¬Ø§ÙˆØ²ÙŠÙ†** (Exceeded Limit)
   - ØªØ¬Ø§ÙˆØ²ÙˆØ§ Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­
   - ÙŠØ­ØªØ§Ø¬ÙˆÙ† Ù„ØªØ±Ù‚ÙŠØ© Ø£Ùˆ Ø´Ø±Ø§Ø¡ Ø¥Ø¶Ø§ÙÙŠ

### Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø©

```sql
-- Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ ÙƒÙ„ Ø¨Ø§Ù‚Ø©
SELECT 
  plan_type,
  COUNT(*) as user_count,
  SUM(CASE WHEN status = 'active' THEN 1 ELSE 0 END) as active_count
FROM subscriptions
GROUP BY plan_type;
```

### Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª

```python
# Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
async def calculate_monthly_revenue(db: AsyncSession) -> float:
    result = await db.execute(
        select(
            func.sum(PlanFeature.monthly_price)
        ).select_from(Subscription).join(
            PlanFeature,
            Subscription.plan_type == PlanFeature.plan_type
        ).where(
            Subscription.status == SubscriptionStatus.ACTIVE
        )
    )
    return result.scalar() or 0.0
```

---

## ğŸ› ï¸ Ø§Ø³ØªØ®Ø¯Ø§Ù… SubscriptionService

### Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯
```python
from app.services.subscription_service import SubscriptionService
from app.models.subscription import PlanType

# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
subscription = await SubscriptionService.create_subscription(
    db=db,
    user_id=user.id,
    plan_type=PlanType.FREE
)
```

### ÙØ­Øµ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
```python
# Ù‚Ø¨Ù„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙ†Ø¸ÙŠÙ
can_clean, error = await SubscriptionService.check_cleaning_limit(db, user.id)
if not can_clean:
    raise HTTPException(status_code=403, detail=error)

# Ù‚Ø¨Ù„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙƒØ±ÙˆØª
can_process, error = await SubscriptionService.check_ocr_limit(db, user.id, cards_count=10)
if not can_process:
    raise HTTPException(status_code=403, detail=error)
```

### ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
```python
# Ø¨Ø¹Ø¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙ†Ø¸ÙŠÙ
await SubscriptionService.increment_cleaning_usage(db, user.id)

# Ø¨Ø¹Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙƒØ±ÙˆØª
await SubscriptionService.increment_ocr_usage(db, user.id, cards_count=10)
```

### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
```python
stats = await SubscriptionService.get_usage_stats(db, user.id)
print(f"Plan: {stats['plan']}")
print(f"Cleaning used: {stats['usage']['cleaning']['used']}/{stats['usage']['cleaning']['limit']}")
```

---

## ğŸ“ˆ ØªÙ‚Ø§Ø±ÙŠØ± ÙˆÙ„ÙˆØ­Ø§Øª ØªØ­Ù„ÙŠÙ„ÙŠØ©

### 1. ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠ
```python
from app.models.subscription import UsageLog

# Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
logs = await db.execute(
    select(UsageLog).where(
        and_(
            UsageLog.user_id == user.id,
            UsageLog.created_at >= start_of_month
        )
    )
)
```

### 2. ØªØ­Ù„ÙŠÙ„ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Conversion Rate)
```python
# Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ØªØ±Ù‚ÙˆØ§ Ù…Ù† Free
conversion_rate = (paid_users / total_users) * 100
```

### 3. Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù… (ARPU)
```python
arpu = total_revenue / total_active_users
```

---

## ğŸ”„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¯ÙˆØ±ÙŠØ© (Cron Jobs)

### Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
```python
# ÙŠØ¬Ø¨ ØªØ´ØºÙŠÙ„Ù‡ ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© ÙƒÙ„ Ø´Ù‡Ø±
from app.services.subscription_service import SubscriptionService

async def reset_all_subscriptions():
    users = await get_all_active_users(db)
    for user in users:
        await SubscriptionService.reset_monthly_usage(db, user.id)
```

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©
```python
from datetime import datetime

async def check_expired_subscriptions():
    now = datetime.utcnow()
    expired = await db.execute(
        select(Subscription).where(
            and_(
                Subscription.current_period_end < now,
                Subscription.status == SubscriptionStatus.ACTIVE
            )
        )
    )
    
    for sub in expired.scalars():
        if sub.auto_renew:
            # Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ
            await renew_subscription(sub)
        else:
            # Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
            sub.status = SubscriptionStatus.EXPIRED
```

---

## ğŸ¨ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

### ØµÙØ­Ø© Ø§Ù„ÙÙˆØªØ±Ø© (`/app/billing`)
- Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
- Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- Ø²Ø± Ø§Ù„ØªØ±Ù‚ÙŠØ©
- Ø³Ø¬Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±

### ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹ (`/checkout?plan=starter`)
- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø©
- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙˆØªØ±Ø©
- Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹
- Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©

### Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (`/app/admin`)
- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
- ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
- Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª

---

## ğŸ” Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ:
- Ø¹Ø±Ø¶ Ø§Ø´ØªØ±Ø§ÙƒÙ‡
- ØªØ±Ù‚ÙŠØ© Ø§Ø´ØªØ±Ø§ÙƒÙ‡
- Ø´Ø±Ø§Ø¡ ÙƒØ±ÙˆØª Ø¥Ø¶Ø§ÙÙŠØ©
- Ø¥Ù„ØºØ§Ø¡ Ø§Ø´ØªØ±Ø§ÙƒÙ‡

### ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø¯ÙŠØ± (Admin):
- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
- ØªØºÙŠÙŠØ± Ø¨Ø§Ù‚Ø© Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù…
- Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Øª

---

## ğŸ“ Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ©

### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 1: Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ±ÙŠØ¯ Ø§Ù„ØªØ±Ù‚ÙŠØ©
```python
# 1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ®ØªØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø© Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ù‡Ø¨ÙˆØ·
# 2. ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ù‡ Ù„Ù€ /checkout?plan=business
# 3. ÙŠØ¯Ø®Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹
# 4. Ø¹Ù†Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¯ÙØ¹:

await SubscriptionService.upgrade_subscription(
    db=db,
    user_id=current_user.id,
    new_plan=PlanType.BUSINESS
)
```

### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 2: Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ­ØªØ§Ø¬ ÙƒØ±ÙˆØª Ø¥Ø¶Ø§ÙÙŠØ©
```python
# 1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØµÙ„ Ù„Ù„Ø­Ø¯
# 2. ÙŠØ¸Ù‡Ø± Ù„Ù‡ ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ø§Ù„Ø³Ø¹Ø±
# 3. Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:

cost, subscription = await SubscriptionService.purchase_extra_cards(
    db=db,
    user_id=current_user.id,
    cards_count=50
)

# 4. Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¯ÙØ¹
# 5. Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹ ØªØ¶Ø§Ù Ø§Ù„ÙƒØ±ÙˆØª
```

### Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 3: Ø¥Ø¯Ø§Ø±Ø© ÙŠØ±ÙŠØ¯ ØªØºÙŠÙŠØ± Ø¨Ø§Ù‚Ø© Ù…Ø³ØªØ®Ø¯Ù…
```python
# Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
await SubscriptionService.upgrade_subscription(
    db=db,
    user_id=target_user_id,
    new_plan=PlanType.BUSINESS
)
```

---

## ğŸš€ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©

1. âœ… Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯Ø§ÙˆÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
2. âœ… ØªÙ†ÙÙŠØ° SubscriptionService
3. âœ… ØªØ­Ø¯ÙŠØ« API endpoints
4. âœ… Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
5. â³ Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Moyasar Ù„Ù„Ø¯ÙØ¹ Ø§Ù„ÙØ¹Ù„ÙŠ
6. â³ Ø¥Ø¶Ø§ÙØ© Webhooks Ù„Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
7. â³ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø§Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
8. â³ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª (Ù‚Ø±Ø¨ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø­Ø¯)

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù…

Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§ØªØŒ Ø±Ø§Ø¬Ø¹:
- `backend/app/services/subscription_service.py`
- `backend/app/models/subscription.py`
- `backend/app/routers/billing.py`
- `frontend/src/pages/admin/AdminDashboard.tsx`
