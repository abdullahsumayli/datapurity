# ูุธุงู OCR ุงูุงุญุชุฑุงูู - ุฏููู ุงูุงุณุชุฎุฏุงู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู OCR ุงุญุชุฑุงูู ุฌุฏูุฏ ุจุงุณุชุฎุฏุงู **EasyOCR** ู **OpenCV** ูุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ูู ุจุทุงูุงุช ุงูุฃุนูุงู ุจุฏูุฉ ุนุงููุฉ.

### โจ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

- โ ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ูุดู ุงูุงุชุฌุงู ุงูุชููุงุฆู (0ยฐ, 90ยฐ, 180ยฐ, 270ยฐ)
- โ ูุนุงูุฌุฉ ุงูุตูุฑ ุงููุณุจูุฉ (CLAHE + ุชูููู ุงูุถูุถุงุก)
- โ ุงุณุชุฎุฑุงุฌ ุฐูู ููุญููู ูุน ูููุงุช ููุชุงุญูุฉ ุดุงููุฉ
- โ ุชูุณูู ุชููุงุฆู ูุฃุฑูุงู ุงูุฌูุงู ุงูุณุนูุฏูุฉ (+966)
- โ ุชูุงุฑูุฑ ุงูุซูุฉ (Confidence scores)

---

## ๐ API Endpoints ุงูุฌุฏูุฏุฉ

### 1. ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ููุท (ุจุฏูู ุญูุธ)

```http
POST /api/v1/ocr/business-card
Content-Type: multipart/form-data

file: <business_card_image.jpg>
```

**Response:**
```json
{
  "full_name": "ุฃุญูุฏ ูุญูุฏ",
  "company": "ุดุฑูุฉ ุงูุชูููุฉ ุงููุชูุฏูุฉ",
  "job_title": "ูุฏูุฑ ุชููู",
  "email": "ahmed@company.com",
  "phone": "+966112345678",
  "mobile": "+966501234567",
  "website": "company.com",
  "address": "ุงูุฑูุงุถ | ุดุงุฑุน ุงูููู ููุฏ",
  "other_lines": ["ูุนูููุงุช ุฅุถุงููุฉ"],
  "all_lines": ["ุฌููุน ุงููุตูุต ุงููุณุชุฎุฑุฌุฉ"],
  "metadata": {
    "total_lines": 12,
    "avg_confidence": 0.87
  }
}
```

### 2. ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช + ุงูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```http
POST /api/v1/ocr/business-card/save
Content-Type: multipart/form-data

file: <business_card_image.jpg>
```

**Response:**
```json
{
  "success": true,
  "contact_id": 42,
  "message": "Contact saved successfully",
  "extracted_data": {
    "full_name": "ุฃุญูุฏ ูุญูุฏ",
    "company": "ุดุฑูุฉ ุงูุชูููุฉ ุงููุชูุฏูุฉ",
    ...
  }
}
```

---

## ๐ ุงูุญููู ุงููุณุชุฎุฑุฌุฉ

| ุงูุญูู | ุงููุตู | ูุซุงู |
|------|------|------|
| `full_name` | ุงูุงุณู ุงููุงูู | ุฃุญูุฏ ูุญูุฏ |
| `company` | ุงุณู ุงูุดุฑูุฉ | ุดุฑูุฉ ุงูุชูููุฉ ุงููุชูุฏูุฉ |
| `job_title` | ุงููุณูู ุงููุธููู | ูุฏูุฑ ุชููู |
| `email` | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ahmed@company.com |
| `phone` | ุฑูู ุงููุงุชู | +966112345678 |
| `mobile` | ุฑูู ุงูุฌูุงู | +966501234567 |
| `website` | ุงููููุน ุงูุฅููุชุฑููู | company.com |
| `address` | ุงูุนููุงู | ุงูุฑูุงุถ \| ุดุงุฑุน ุงูููู ููุฏ |
| `other_lines` | ุฃุณุทุฑ ุฅุถุงููุฉ | [...] |
| `all_lines` | ุฌููุน ุงููุตูุต | [...] |
| `metadata` | ูุนูููุงุช OCR | {total_lines, avg_confidence} |

---

## ๐๏ธ ุงูููุชุจุงุช ุงููุณุชุฎุฏูุฉ

```
easyocr==1.7.1           # OCR engine
opencv-python-headless   # Image processing
numpy==1.26.3           # Numerical operations
```

---

## ๐ก ููููุฉ ุนูู ุงููุธุงู

### 1. ูุนุงูุฌุฉ ุงูุตูุฑ
```python
# ุชุญููู ุฅูู Grayscale
# ุชุทุจูู CLAHE (Contrast Limited Adaptive Histogram Equalization)
# ุชูููู ุงูุถูุถุงุก ุจู Median Blur
```

### 2. ูุดู ุงูุงุชุฌุงู
```python
# ุชุฌุฑุจุฉ 4 ุงุชุฌุงูุงุช
# ุงุฎุชูุงุฑ ุงูุงุชุฌุงู ุจุฃุนูู ุซูุฉ
```

### 3. ุงูุงุณุชุฎุฑุงุฌ ุงูุฐูู
```python
# Email: Regex pattern
# Phone/Mobile: Regex + ุชูุณูู ุณุนูุฏู
# Name: ุฃูู 3 ุฃุณุทุฑ + ูุญุต ุงููููุงุช
# Company: ูููุงุช ููุชุงุญูุฉ (ุดุฑูุฉุ Companyุ Ltdุ etc.)
# Job Title: ูููุงุช ููุชุงุญูุฉ (ูุฏูุฑุ Managerุ Engineerุ etc.)
# Address: ูููุงุช ููุชุงุญูุฉ (ุดุงุฑุนุ Streetุ ุงูุฑูุงุถุ etc.)
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุนุจุฑ Swagger UI
1. ุงูุชุญ: http://localhost:8000/api/v1/docs
2. ุงุจุญุซ ุนู ูุณู **ocr**
3. ุฌุฑูุจ endpoint: `/api/v1/ocr/business-card`
4. ุงุฑูุน ุตูุฑุฉ ุจุทุงูุฉ ุนูู
5. ุดุงูุฏ ุงููุชูุฌุฉ!

### ุนุจุฑ cURL
```bash
curl -X POST "http://localhost:8000/api/v1/ocr/business-card" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@card.jpg"
```

### ุนุจุฑ Python
```python
import requests

url = "http://localhost:8000/api/v1/ocr/business-card"
files = {"file": open("card.jpg", "rb")}
response = requests.post(url, files=files)
print(response.json())
```

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

```
backend/
โโโ app/
โ   โโโ routers/
โ   โ   โโโ ocr.py                    # API endpoints (148 lines)
โ   โโโ services/
โ       โโโ ocr_business_cards.py     # OCR engine (484 lines)
โโโ requirements.txt                   # Updated dependencies
```

---

## ๐ ุงูุชุบููุฑุงุช ุงูุฃุฎุฑู

### ุชู ุฅุฒุงูุชูุง:
- โ pytesseract (Tesseract OCR ุงููุฏูู)
- โ Marketing features (Lead, Campaign, ScheduledTask models)
- โ Trial router (ูุชุทูุจ lead_service)
- โ Scheduler (ูุชุทูุจ ScheduledTask model)

### ุชู ุงูุฅุจูุงุก ุนูููุง:
- โ `/cards/upload` endpoint (ููุฃุบุฑุงุถ ุงููุฏููุฉ)
- โ `/cards/ocr` endpoint (ูุณุชุฎุฏูู Frontend)
- โ Contact model (ูุญูุธ ุฌูุงุช ุงูุงุชุตุงู)

---

## ๐จ ููุงุญุธุงุช ูููุฉ

1. **ุงููููุงุช ุงูููุชุงุญูุฉ ุงูุนุฑุจูุฉ ุดุงููุฉ:**
   - ุงูุดุฑูุงุช: ุดุฑูุฉุ ูุคุณุณุฉุ ุงููุญุฏูุฏุฉุ ุงููุงุจุถุฉุ ูุฌููุนุฉ
   - ุงููุธุงุฆู: ูุฏูุฑุ ูููุฏุณุ ุฑุฆูุณุ ูุคุณุณุ ูุจูุนุงุชุ ุชุณููู
   - ุงูุนูุงููู: ุดุงุฑุนุ ุทุฑููุ ุญูุ ุต.ุจุ ุงูุฑูุงุถุ ุฌุฏุฉุ ุงูุฏูุงู

2. **ุชูุณูู ุงูุฃุฑูุงู ุงูุณุนูุฏูุฉ:**
   - `05XXXXXXXX` โ `+9665XXXXXXXX`
   - `5XXXXXXXX` โ `+9665XXXXXXXX`
   - `+9665XXXXXXXX` โ ููุง ูู

3. **ุฏูุฉ OCR:**
   - ูุชูุณุท ุงูุซูุฉ: 85-95%
   - ูุนูู ูุน ุงูุตูุฑ ููุฎูุถุฉ ุงูุฌูุฏุฉ
   - ูุชุนุงูู ูุน ุงูุฅุถุงุกุฉ ุงูุถุนููุฉ

---

## ๐ ููุงุฑูุฉ: EasyOCR vs Tesseract

| ุงูููุฒุฉ | EasyOCR | Tesseract |
|-------|---------|-----------|
| ุฏูุฉ ุงูุนุฑุจูุฉ | โญโญโญโญโญ | โญโญโญ |
| ูุดู ุงูุงุชุฌุงู | ุชููุงุฆู | ูุฏูู |
| ูุนุงูุฌุฉ ุงูุตูุฑ | ูุฏูุฌุฉ | ุฎุงุฑุฌูุฉ |
| ุณุฑุนุฉ | ูุชูุณุทุฉ | ุณุฑูุนุฉ |
| ุญุฌู ุงูููุฏูู | 400+ MB | 10 MB |

---

## ๐ ูุซุงู ูุงูู

```python
# ูุซุงู: ุงุณุชุฎุฑุงุฌ ุจูุงูุงุช ูู ุจุทุงูุฉ ูุญูุธูุง
import requests

# 1. ุฑูุน ุงูุตูุฑุฉ
url = "http://localhost:8000/api/v1/ocr/business-card/save"
with open("business_card.jpg", "rb") as f:
    files = {"file": f}
    response = requests.post(url, files=files)

# 2. ุงูุชุญูู ูู ุงููุชูุฌุฉ
if response.status_code == 200:
    data = response.json()
    print(f"โ ุชู ุงูุญูุธ! ID: {data['contact_id']}")
    print(f"๐ ุงูุงุณู: {data['extracted_data']['full_name']}")
    print(f"๐ข ุงูุดุฑูุฉ: {data['extracted_data']['company']}")
    print(f"๐ง Email: {data['extracted_data']['email']}")
    print(f"๐ฑ Mobile: {data['extracted_data']['mobile']}")
else:
    print(f"โ ุฎุทุฃ: {response.text}")
```

---

## ๐ ุงูุชุทููุฑ ุงููุณุชูุจูู

- [ ] ุฅุถุงูุฉ cache ููููุฏููุงุช (ุชุญุณูู ุงูุณุฑุนุฉ)
- [ ] ุฏุนู batch processing (ูุนุงูุฌุฉ ูุชุนุฏุฏุฉ)
- [ ] ุชุญุณูู ุงุณุชุฎุฑุงุฌ ุงูุนูุงููู (parsing ุฃูุถู)
- [ ] ุฅุถุงูุฉ validation ููุจูุงูุงุช ุงููุณุชุฎุฑุฌุฉ
- [ ] ุฏุนู ุตูุบ ุฅุถุงููุฉ (PDFุ HEIC)

---

## ๐ค ุงููุณุงููุฉ

ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ: GitHub Copilot
ุงูุชุงุฑูุฎ: ููููุจุฑ 2025
ุงูุฅุตุฏุงุฑ: 1.0.0

---

## ๐ ุงูุฏุนู

ูููุดุงูู ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุงูุชุญ issue ุนูู GitHub.
